(()=>{"use strict";const t=250;class n{constructor(t,n,s,e){this.canvas=t,this.t=n,this.i=s,this.o=e,this.h={x:0,y:0},this.l={x:0,y:0},this.u={x:0,y:0},this.M={x:0,y:0},this.pressed=!1,this.boundingRect=this.canvas.getBoundingClientRect(),this.m(this.canvas)}resize(){this.boundingRect=this.canvas.getBoundingClientRect()}m(t){t.addEventListener("mousedown",this.C.bind(this),{capture:!0,passive:!1}),window.addEventListener("mousemove",this.p.bind(this),{capture:!0,passive:!1}),window.addEventListener("mouseup",this.v.bind(this),{capture:!0,passive:!1}),t.addEventListener("touchstart",this.B.bind(this),{capture:!0,passive:!1}),window.addEventListener("touchend",this.v.bind(this),{capture:!0,passive:!1}),window.addEventListener("touchmove",this.F.bind(this),{capture:!0,passive:!1}),window.addEventListener("touchcancel",this.v.bind(this),{capture:!0,passive:!1})}A(){this.u.x=(this.l.x-this.h.x)/t,this.u.y=(this.h.y-this.l.y)/t}$(t){const n=canvas.getBoundingClientRect();let s,e;if(t instanceof MouseEvent)s=t.clientX-n.left,e=t.clientY-n.top;else if(t instanceof TouchEvent){const t=event.touches[0];s=t.clientX-n.left,e=t.clientY-n.top}s*=canvas.width/n.width,e*=canvas.height/n.height,this.M.x=s,this.M.y=e}k(t){let n=0;return t instanceof MouseEvent?n=t.clientX:t instanceof TouchEvent&&(n=t.changedTouches[0].clientX),(n-this.boundingRect.left)*(this.canvas.width/this.boundingRect.width)}D(t){let n=0;return t instanceof MouseEvent?n=t.clientY:t instanceof TouchEvent&&(n=t.changedTouches[0].clientY),(n-this.boundingRect.top)*(this.canvas.height/this.boundingRect.height)}B(t){t.preventDefault(),this.$(t),this.j(this.k(t),this.D(t))}F(t){t.preventDefault(),this.$(t),this.L(this.k(t),this.D(t)),console.log(this.pressed)}C(t){t.preventDefault(),this.$(t),this.j(this.k(t),this.D(t))}p(t){t.preventDefault(),this.$(t),this.L(this.k(t),this.D(t))}j(t,n){this.pressed=!0,this.h.x=t,this.h.y=n,this.l.x=t,this.l.y=n,this.A(),this.t()}L(n,s){if(!this.pressed)return;const e=n-this.h.x,i=s-this.h.y,o=Math.hypot(e,i);if(this.l.x=n,this.l.y=s,o>t){const n=e/o*t,s=i/o*t;this.l.x=this.h.x+n,this.l.y=this.h.y+s}this.A(),this.o()}v(t){0!=this.pressed&&(t.preventDefault(),t.stopPropagation(),this.pressed=!1,this.h.x=0,this.h.y=0,this.l.x=0,this.l.y=0,this.A(),this.i())}draw(t){this.pressed&&(this.P(t),this.I(t))}P(n){n.strokeStyle="#FFD700",n.lineWidth=6,n.beginPath(),n.arc(this.h.x,this.h.y,t,0,2*Math.PI),n.stroke(),n.closePath()}I(t){t.strokeStyle="#F0E68C",t.lineWidth=6,t.beginPath(),t.arc(this.l.x,this.l.y,125,0,2*Math.PI),t.fillStyle="#F0E68C",t.globalAlpha=.5,t.fill(),t.globalAlpha=1,t.closePath()}}class s{constructor(t,n,s){this.S=t,this.T=n,this.color=s,this.H=[],this.N()}N(){const{S:t,T:n,color:s}=this,o=Math.atan2(n.y-t.y,n.x-t.x),h=Math.hypot(n.x-t.x,n.y-t.y);for(let n=0;n<Math.ceil(h/i);n++){const h=t.x+Math.cos(o)*n*i,a=t.y+Math.sin(o)*n*i;this.H.push(new e(h,a,s,o))}this.angle=o}reset(){this.H=[],this.N()}update(){for(let t=0;t<this.H.length;t++)this.H[t].G<=0||this.H[t].update()}draw(t){for(let n=0;n<this.H.length;n++)this.H[n].G<=0||this.H[n].draw(t)}}class e{constructor(t,n,s,e){this.color=s,this.J={x:t,y:n},this.U={x:0,y:0},this.color=s,this.G=100,this.angle=e}update(){this.J.x+=this.U.x,this.J.y+=this.U.y,this.G--}draw(t){this.left<0||(this.G<75?t.fillStyle=`rgba(${this.color}, ${this.G/75})`:t.fillStyle=`rgba(${this.color}, 1)`,t.beginPath(),t.rect(this.J.x-i/2,this.J.y,i,i),t.fill(),t.closePath())}}const i=20,o="255,255,255";class h{constructor(t,n,e,h,a=!0,r=!0){this.width=i,this.J={x:0,y:0},this.S={x:0,y:0},this.T={x:0,y:0},this.V={x:0,y:0},this.W={x:0,y:0},this.O=!1,this.R=a,this.color=a?o:"0,0,0",this.q(t,n,e,h),this.K=new s(this.S,this.T,this.color)}q(t,n,s,e){this.S.x=t,this.S.y=n,this.T.x=s,this.T.y=e;const{S:i,T:o}=this;this.J.x=(i.x+o.x)/2,this.J.y=(i.y+o.y)/2,this.angle=Math.atan2(o.y-i.y,o.x-i.x)-Math.PI/2,this.X=this.Y(i,o,this.width),this.Z=this._();const h=6*Math.sin(this.angle),a=6*-Math.cos(this.angle);this.V.x=this.S.x-h,this.V.y=this.S.y-a,this.W.x=this.T.x+h,this.W.y=this.T.y+a}update(){this.O&&this.K.update()}rotate(t,n,s){const e=this.S.x,i=this.S.y,o=this.T.x,h=this.T.y,a=Math.cos(t),r=Math.sin(t),c=a*(e-n)-r*(i-s)+n,l=r*(e-n)+a*(i-s)+s,u=a*(o-n)-r*(h-s)+n,d=r*(o-n)+a*(h-s)+s;this.q(c,l,u,d)}tt(){}reset(){this.O=!1,this.K.reset()}nt(t){this.O=!0,this.K=new s(this.S,this.T,this.color),this.K.H.forEach((n=>{const s=Math.random()*Math.PI*2;n.U.x=t*(2*Math.random()-1)*Math.cos(s),n.U.y=t*(2*Math.random()-1)*Math.sin(s)}))}Y(t,n,s){const e=s/2,i=Math.sqrt((n.x-t.x)**2+(n.y-t.y)**2)/2,o=this.angle;return[{x:-e,y:-i},{x:-e,y:i},{x:e,y:i},{x:e,y:-i}].map((t=>({x:this.J.x+(t.x*Math.cos(o)-t.y*Math.sin(o)),y:this.J.y+(t.x*Math.sin(o)+t.y*Math.cos(o))})))}_(){const t=[],n=this.X,s=n.length;for(let e=0;e<s;e++){const i=(e+1)%s,o=n[i].x-n[e].x,h=n[i].y-n[e].y,a=Math.sqrt(o*o+h*h),r={x:-h/a,y:o/a};t.push(r)}return t}st(t){let n=Number.POSITIVE_INFINITY,s=-Number.POSITIVE_INFINITY;for(let e=0;e<this.X.length;e++){let i=this.X[e].x*t.x+this.X[e].y*t.y;n=Math.min(n,i),s=Math.max(s,i)}return{min:n,max:s}}et(t,n,s,e,i){const o=t-s,h=n-e;return o*o+h*h<=i*i}it(t,n){return this.ot(t,n)}ot(t,n){let s=!1;const e=this.X,i=e.length;for(let o=0,h=i-1;o<i;h=o++){const i=e[o].x,a=e[o].y,r=e[h].x,c=e[h].y;a>n!=c>n&&t<(r-i)*(n-a)/(c-a)+i&&(s=!s)}return s}ht(t,n){return this.rt(t,n)?this.S:this.ct(t,n)?this.T:null}rt(t,n){return this.et(t,n,this.V.x,this.V.y,15)}ct(t,n){return this.et(t,n,this.W.x,this.W.y,15)}lt(t,n){return this.R?this.et(t,n,this.J.x,this.J.y,15):null}draw(t){this.O?this.K.draw(t):this.ut(t)}ut(t){t.beginPath(),t.setLineDash([]),t.fillStyle=`rgba(${this.color}, 1.0)`,t.strokeStyle="#000",t.lineWidth=2,t.moveTo(this.X[0].x,this.X[0].y);for(let n=1;n<this.X.length;n++)t.lineTo(this.X[n].x,this.X[n].y);t.closePath(),t.fill(),t.stroke(),this.color===o&&(t.beginPath(),t.lineWidth=2,t.strokeStyle="red",t.moveTo(this.J.x-5,this.J.y-5),t.lineTo(this.J.x+5,this.J.y+5),t.moveTo(this.J.x-5,this.J.y+5),t.lineTo(this.J.x+5,this.J.y-5),t.stroke(),t.closePath(),t.beginPath(),t.fillStyle="rgba(255, 0, 0, 1.0)",t.arc(this.V.x,this.V.y,4,0,2*Math.PI),t.arc(this.W.x,this.W.y,4,0,2*Math.PI),t.fill())}}class a{constructor(t=0,n=0,s=0,e=1){this.dt={x:t,y:n},this.angle=s,this.ft=e,this.wt={x:t,y:n}}get Mt(){return this.wt.x=this.dt.x+this.ft*Math.cos(this.angle),this.wt.y=this.dt.y+this.ft*Math.sin(this.angle),this.wt}}class r{constructor(){this.X=[]}}function c(t,n){return t.max>n.min&&n.max>t.min}function l(t,n){return Math.min(t.max-n.min,n.max-t.min)}function u(t,n){let s=Number.POSITIVE_INFINITY,e=null,i=null;for(let o=0;o<n.Z.length;o++){const h=n.Z[o],a=n.st(h),r=t.st(h);if(!c(a,r))return null;{const t=l(a,r);t<s&&(s=t,e=h,i=n.X[o])}}for(const o of n.X){const h={x:t.J.x-o.x,y:t.J.y-o.y},a=Math.sqrt(h.x*h.x+h.y*h.y);if(0===a)continue;h.x/=a,h.y/=a;const r=n.st(h),u=t.st(h);if(!c(r,u))return null;{const t=l(r,u);t<s&&(s=t,e=h,i=o)}}if(s===Number.POSITIVE_INFINITY)return null;let o=t.J.x-i.x,h=t.J.y-i.y;return o*e.x+h*e.y<0&&(e.x=-e.x,e.y=-e.y),{Ct:{x:e.x*s,y:e.y*s},axis:e}}class d{vt=1;Bt=50;constructor(t,n,s=Math.PI,e=8,i=!0){if(this.xt=e,this.color="#fff",this.bt="#fff",this.J={x:t,y:n},this.Ft={x:t,y:n},this.U={x:0,y:0},this.At=null,this.vt=e,this.gt=s,this.J.x=t,this.J.y=n,this.alpha=1,this.$t=0,this.kt=[],this.yt=0,this.Et=0,this.Dt=!1,i)for(let i=0;i<this.Bt;i++){const i=new d(t,n,s,e,!1);i.alpha=0,i.bt=this.bt,this.kt.push(i)}}st(t){const n=this.J.x*t.x+this.J.y*t.y;return{min:n-this.xt,max:n+this.xt}}update(){this.yt++;const t=.98-this.$t;if(this.U.x*=t,this.U.y*=t,Math.abs(this.U.x)<.01&&(this.U.x=0),Math.abs(this.U.y)<.01&&(this.U.y=0),this.J.x+=this.U.x,this.J.y+=this.U.y,this.yt%1==0){const t=this.kt[this.Et];t.J.x=this.J.x,t.J.y=this.J.y,t.alpha=.25,this.Et=(this.Et+1)%this.Bt}for(let t=0;t<this.Bt;t++){this.kt[t].alpha-=.009}}reset(){this.J.x=this.Ft.x,this.J.y=this.Ft.y,this.At=null,this.U.x=0,this.U.y=0,this.alpha=1,this.yt=0,this.Dt=!1;for(let t=0;t<this.Bt;t++)this.kt[t]=new d(this.Ft.x,this.Ft.y,this.gt,this.xt),this.kt[t].alpha=0}}const f=["#B4E7CE","#59A96A","#9BDEAC","#474A2C","#BB8A89","#977390","#AC7B7D","#785589","#F4F4F9","#586F7C","#B8DBD9","#2F4550","#AFB3F7","#7A93AC","#92BCEA","#617073","#FEC0AA","#84732B","#EC4E20","#574F2A","#F2F6D0","#D9D2B6","#D0E1D4","#71697A","#FAA275","#CE6A85","#FF8C61","#985277","#BEEF9E","#828C51","#A6C36F","#335145","#CF9893","#A96DA3","#BC7C9C","#3B3B58","#FFA9E7","#7F2CCB","#FF84E8","#414361","#93B5C6","#F0CF65","#D7816A","#BD4F6C","#524948","#7CB4B8","#70F8BA","#57467B","#6A8D73","#E4FFE1","#FFE8C2","#F0A868"];class w{constructor(t,n,s,e,i,o){this.J={x:t,y:n},this.U={x:i,y:o},this.xt=s,this.color=e,this.yt=0}}class M{At=null;constructor(t,n,s=15,e="black"){this.J={x:t,y:n},this.xt=s,this.color=e,this.H=[];for(let s=0;s<100;s++){const s=Math.floor(5*Math.random()+1)-5,e=f[Math.floor(Math.random()*f.length)],i=new w(t,n,5,e,s*Math.cos(Math.random()*Math.PI*2),s*Math.sin(Math.random()*Math.PI*2));i.yt=Math.floor(100*Math.random()),this.H.push(i)}}jt(){for(let t=0;t<this.H.length;t++){const n=this.H[t];if(n.J.x+=n.U.x,n.J.y+=n.U.y,n.U.y+=.1,n.yt++,n.yt>100){n.J.x=this.J.x,n.J.y=this.J.y,n.yt=0;const t=Math.floor(5*Math.random()+1)-5;n.U.x=t*Math.cos(Math.random()*Math.PI*2),n.U.y=t*Math.sin(Math.random()*Math.PI*2)}}}Lt(t){for(let n=0;n<this.H.length;n++){const s=this.H[n];t.beginPath(),t.arc(s.J.x,s.J.y,s.xt,0,2*Math.PI),t.fillStyle=s.color,t.fill()}}}class m{Pt=[];It=[];St=[];number=0;Tt=!1;backgroundColor="red";Ht="red";Nt="red";Gt="red";width=500;height=500;Dt=!1;reset(){this.Dt=!1,this.Tt=!1,this.Pt.forEach((t=>{var n,s;t.reset(),t.bt=(n=this.Ht,(s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n))?[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]:null),t.kt.forEach((n=>{n.bt=t.bt}))})),this.It.forEach((t=>{t.reset()})),document.getElementById("js-place-wall").classList.remove("disabled"),document.getElementById("js-place-wall").setAttribute("disabled",!1),document.body.style.backgroundColor=this.Ht;const t=document.getElementById("js-place-wall");t.style.display="block",t.classList.remove("jiggle"),this.number<5?t.style.display="none":5===this.number&&t.classList.add("jiggle")}get Jt(){for(let t=0;t<this.Pt.length;t++)if(!this.Pt[t].At)return!1;return!0}update(){}draw(t){}}class C extends m{backgroundColor="#B4E7CE";Ht="#59A96A";Nt="#9BDEAC";Gt="#474A2C";number=1;constructor(){super(),this.St=[new M(400,250)],this.Pt=[new d(250,250)]}draw(t){L(t,250,250,325,250)}}class p extends m{backgroundColor="#BB8A89";Ht="#977390";Nt="#AC7B7D";Gt="#785589";number=2;constructor(){super(),this.St=[new M(400,125),new M(400,375)],this.Pt=[new d(250,125),new d(250,375)]}}class v extends m{backgroundColor="#F4F4F9";Ht="#586F7C";Nt="#B8DBD9";Gt="#2F4550";number=3;constructor(){super(),this.St=[new M(100,125),new M(400,375)],this.Pt=[new d(250,125),new d(250,375,0)]}}class B extends m{backgroundColor="#AFB3F7";Ht="#7A93AC";Nt="#92BCEA";Gt="#617073";number=4;constructor(){super(),this.St=[new M(300,125),new M(400,375)],this.Pt=[new d(50,125),new d(150,375,0)],this.It=[new h(100,50,100,200,!1)]}draw(t){L(t,50,125,-50,125)}}class x extends m{backgroundColor="#FEC0AA";Ht="#84732B";Nt="#EC4E20";Gt="#574F2A";number=5;constructor(){super(),this.St=[new M(400,125),new M(350,375)],this.Pt=[new d(200,125),new d(250,375,0)],this.It=[new h(25,0,25,500,!1),new h(475,0,475,500,!1)]}draw(t){b(t,100,75,20,100),L(t,200,125,55,125)}}function b(t,n,s,e,i,o=0){t.save(),t.translate(n,s),t.rotate(o),t.beginPath(),t.setLineDash([5,15]),t.strokeStyle="black",t.lineWidth=2,t.rect(0,0,e,i),t.stroke(),t.restore()}class F extends m{backgroundColor="#F2F6D0";Ht="#D9D2B6";Nt="#D0E1D4";Gt="#71697A";number=6;constructor(){super();const t=250,n=250,s=200;this.St=[new M(t,50),new M(t-s*Math.cos(Math.PI/6),n+s*Math.sin(Math.PI/6)),new M(t+s*Math.cos(Math.PI/6),n+s*Math.sin(Math.PI/6))];const e=[{x:t,y:450},{x:t-s*Math.cos(Math.PI/6),y:n-s*Math.sin(Math.PI/6)},{x:t+s*Math.cos(Math.PI/6),y:n-s*Math.sin(Math.PI/6)}],i=(e[0].x+e[1].x+e[2].x)/3,o=(e[0].y+e[1].y+e[2].y)/3,h=(t,n)=>Math.atan2(o-n,i-t);this.Pt=[new d(e[0].x,e[0].y,h(e[0].x,e[0].y)-Math.PI/2),new d(e[1].x,e[1].y,h(e[1].x,e[1].y)-Math.PI/2),new d(e[2].x,e[2].y,h(e[2].x,e[2].y)-Math.PI/4)],this.It=[]}draw(t){b(t,350,150,20,100,Math.PI/16)}}class A extends m{backgroundColor="#FAA275";Ht="#CE6A85";Nt="#FF8C61";Gt="#985277";number=7;constructor(){super(),this.St=[new M(150,400),new M(250,400),new M(350,400)],this.Pt=[new d(150,150),new d(250,200),new d(350,250)],this.It=[]}}class g extends m{backgroundColor="#BEEF9E";Ht="#828C51";Nt="#A6C36F";Gt="#335145";number=8;constructor(){super(),this.St=[new M(250,250,25)];this.Pt=[new d(400,250,0),new d(250+150*Math.cos(Math.PI),250+150*Math.sin(Math.PI),Math.PI)]}}class $ extends m{backgroundColor="#CF9893";Ht="#A96DA3";Nt="#BC7C9C";Gt="#3B3B58";number=9;constructor(){super(),this.St=[new M(250,300),new M(200,250)],this.Pt=[new d(250,200,-Math.PI),new d(300,250,-Math.PI/2)],this.It=[new h(200,200,300,300,!1),new h(300,200,200,300,!1)]}}class k extends m{backgroundColor="#FFA9E7";Ht="#7F2CCB";Nt="#FF84E8";Gt="#414361";number=10;constructor(){super(),this.St=[new M(200,200),new M(400,400)],this.Pt=[new d(250,250,-Math.PI),new d(300,300,-Math.PI/2)],this.It=[new h(100,200,200,100,!1)]}}class y extends m{backgroundColor="#93B5C6";Ht="#F0CF65";Nt="#D7816A";Gt="#BD4F6C";number=11;constructor(){super(),this.St=[new M(100,100),new M(250,100),new M(400,100)],this.Pt=[new d(250,200,Math.PI),new d(175,325,Math.PI/4),new d(325,325,-Math.PI/4)],this.It=[]}}class E extends m{backgroundColor="#524948";Ht="#7CB4B8";Nt="#70F8BA";Gt="#57467B";number=12;constructor(){super(),this.St=[new M(200,200),new M(300,200)],this.Pt=[new d(100,250,Math.PI),new d(400,250,Math.PI/3)],this.It=[new h(125,125,175,300,!1),new h(375,125,325,300,!1),new h(125,125,175,150,!1),new h(375,125,325,150,!1),new h(175,150,325,150,!1),new h(175,300,325,300,!1),new h(200,250,200,275,!1),new h(300,250,300,275,!1),new h(200,275,300,275,!1)]}}class D extends m{backgroundColor="#6A8D73";Ht="#E4FFE1";Nt="#FFE8C2";Gt="#F0A868";number=13;constructor(){super(),this.St=[new M(250,250)],this.Pt=[new d(250,100,Math.PI)];const t=new h(175,150,175,350,!1),n=new h(325,150,325,350,!1),s=new h(185,160,315,160,!1),e=new h(185,340,315,340,!1);this.It=[t,n,s,e],this.Ut=[t,n,s,e]}update(){super.update();for(let t=0;t<this.Ut.length;t++){this.Ut[t].rotate(.01,250,250)}}}const j=500;function L(t,n,s,e,i){P(t,n,s,e,i);const o=Math.abs(n-e),h=Math.abs(s-i);let a=n,r=e,c=s,l=i;e<0&&(a=n+j,r=a-o),e>j&&(a=n-j,r=a+o),i<0&&(c=s+j,l=c-h),i>j&&(c=s-j,l=c+h),P(t,a,c,r,l)}function P(t,n,s,e,i){const o=Math.sqrt(Math.pow(e-n,2)+Math.pow(i-s,2));var h=Math.min(o,20),a=Math.atan2(i-s,e-n);t.strokeStyle="#000",t.lineWidth=2,t.setLineDash([3,3]),t.beginPath(),t.moveTo(e,i),t.lineTo(e-h*Math.cos(a-Math.PI/6),i-h*Math.sin(a-Math.PI/6)),t.lineTo(e-h*Math.cos(a+Math.PI/6),i-h*Math.sin(a+Math.PI/6)),t.closePath(),t.stroke(),t.beginPath(),t.moveTo(n,s);let r=e-h*Math.cos(a),c=i-h*Math.sin(a);t.lineTo(r,c),t.stroke()}const I=function(){var t,n,s,e,i,o=function(t){return Math.sin(6.283184*t)},h=function(t){return.003959503758*2**((t-128)/12)},a=function(t,n,s){var e,i,o,a,c,l,u=r[t.Vt[0]],d=t.Vt[1],f=t.Vt[3]/32,w=r[t.Vt[4]],M=t.Vt[5],m=t.Vt[8]/32,C=t.Vt[9],p=t.Vt[10]*t.Vt[10]*4,v=t.Vt[11]*t.Vt[11]*4,B=t.Vt[12]*t.Vt[12]*4,x=1/B,b=-t.Vt[13]/16,F=t.Vt[14],A=s*2**(2-t.Vt[15]),g=new Int32Array(p+v+B),$=0,k=0;for(e=0,i=0;e<p+v+B;e++,i++)i>=0&&(i-=A,c=h(n+(15&(F=F>>8|(255&F)<<4))+t.Vt[2]-128),l=h(n+(15&F)+t.Vt[6]-128)*(1+8e-4*t.Vt[7])),o=1,e<p?o=e/p:e>=p+v&&(o=(1-(o=(e-p-v)*x))*3**(b*o)),a=u($+=c*o**f)*d,a+=w(k+=l*o**m)*M,C&&(a+=(2*Math.random()-1)*C),g[e]=80*a*o|0;return g},r=[o,function(t){return t%1<.5?1:-1},function(t){return t%1*2-1},function(t){var n=t%1*4;return n<2?n-1:3-n}];this.init=function(o){t=o,n=o.Wt,s=0,e=o.zt*o.Ot*(n+1)*2,i=new Int32Array(e)},this.Rt=function(){var h,c,l,u,d,f,w,M,m,C,p,v,B,x,b=new Int32Array(e),F=t.qt[s],A=t.zt,g=t.Ot,$=0,k=0,y=!1,E=[];for(l=0;l<=n;++l)for(w=F.Qt[l],u=0;u<g;++u){var D=w?F.c[w-1].f[u]:0;D&&(F.Vt[D-1]=F.c[w-1].f[u+g]||0,D<17&&(E=[]));var j=r[F.Vt[16]],L=F.Vt[17]/512,P=2**(F.Vt[18]-9)/A,I=F.Vt[19],S=F.Vt[20],T=43.23529*F.Vt[21]*3.141592/44100,H=1-F.Vt[22]/255,N=1e-5*F.Vt[23],G=F.Vt[24]/32,J=F.Vt[25]/512,U=6.283184*2**(F.Vt[26]-9)/A,V=F.Vt[27]/255,W=F.Vt[28]*A&-2;for(p=(l*g+u)*A,d=0;d<4;++d)if(f=w?F.c[w-1].n[u+d*g]:0){E[f]||(E[f]=a(F,f,A));var z=E[f];for(c=0,h=2*p;c<z.length;c++,h+=2)b[h]+=z[c]}for(c=0;c<A;c++)(C=b[M=2*(p+c)])||y?(v=T,I&&(v*=j(P*M)*L+.5),k+=(v=1.5*Math.sin(v))*(B=H*(C-k)-($+=v*k)),C=3==S?k:1==S?B:$,N&&(C=(C*=N)<1?C>-1?o(.25*C):-1:1,C/=N),y=(C*=G)*C>1e-5,x=C*(1-(m=Math.sin(U*M)*J+.5)),C*=m):x=0,M>=W&&(x+=b[M-W+1]*V,C+=b[M-W]*V),b[M]=0|x,b[M+1]=0|C,i[M]+=0|x,i[M+1]+=0|C}return++s/t.Kt},this.Xt=function(t){for(var n=t.createBuffer(2,e/2,44100),s=0;s<2;s++)for(var o=n.getChannelData(s),h=s;h<e;h+=2)o[h>>1]=i[h]/65536;return n},this.Yt=function(){var t=44+2*e-8,n=t-36,s=new Uint8Array(44+2*e);s.set([82,73,70,70,255&t,t>>8&255,t>>16&255,t>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&n,n>>8&255,n>>16&255,n>>24&255]);for(var o=0,h=44;o<e;++o){var a=i[o];a=a<-32767?-32767:a>32767?32767:a,s[h++]=255&a,s[h++]=a>>8&255}return s},this.getData=function(t,n){for(var s=2*Math.floor(44100*t),e=new Array(n),o=0;o<2*n;o+=1){var h=s+o;e[o]=t>0&&h<i.length?i[h]/32768:0}return e}},S={qt:[{Vt:[2,138,116,0,2,138,128,4,0,0,47,48,162,63,124,3,0,139,4,1,3,64,160,3,32,147,4,121,5],Qt:[1],c:[{n:[149],f:[]}]}],zt:5513,Ot:32,Wt:0,Kt:1},T={qt:[{Vt:[2,138,116,0,2,138,128,4,0,0,47,48,162,63,124,3,0,139,4,1,3,64,160,3,32,147,4,121,5],Qt:[1],c:[{n:[135,,,,147,,,,159,,,,,,,,,,,,,,,,,,,,,,,,139,,,,151,,,,163,,,,,,,,,,,,,,,,,,,,,,,,142,,,,154,,,,166],f:[]}]}],zt:11025,Ot:32,Wt:0,Kt:1},H={qt:[{Vt:[2,138,116,0,2,138,113,4,0,0,47,48,162,63,124,3,0,139,4,1,3,64,160,3,32,147,4,121,5],Qt:[1],c:[{n:[135],f:[]}]}],zt:5513,Ot:32,Wt:0,Kt:1},N={qt:[{Vt:[0,91,128,0,0,95,128,12,0,0,12,0,72,0,0,0,0,0,0,0,2,255,0,0,32,83,3,21,4],Qt:[1],c:[{n:[135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,139,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,142],f:[]}]}],zt:5513,Ot:32,Wt:0,Kt:1};var G={qt:[{Vt:[0,0,128,0,0,0,128,0,0,125,0,1,59,0,0,0,0,0,0,0,1,193,171,0,29,39,3,88,3],Qt:[1],c:[{n:[135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,139,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,140],f:[]}]}],zt:5513,Ot:32,Wt:0,Kt:1};const J={qt:[{Vt:[2,138,116,0,2,138,128,4,0,0,47,48,162,63,124,3,0,139,4,1,3,64,160,3,32,147,4,121,5],Qt:[1],c:[{n:[135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,139,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,142],f:[]}]}],zt:5513,Ot:32,Wt:0,Kt:1},U=.25,V=.15,W=2,z=document.getElementById("canvas"),O=z.getContext("2d"),R={Dt:1,Zt:2,_t:4,tn:8,nn:16,sn:18,en:32,hn:22};let q={an:null,rn:null,cn:null,inputMode:R.Dt,ln:R.Dt,un:"",dn:"",fn:"",wn:"",Mn:{x:0,y:0},mn:!1,Cn:{Dt:null,Zt:null,pn:null,vn:null,Bn:null,xn:null}};function Q(t,n){var s=new I;s.init(t);var e=!1;let i=setInterval((function(){if(e)clearInterval(i);else if(e=s.Rt()>=1){var t=s.Yt(),o=document.createElement("audio");o.preload="auto",o.src=URL.createObjectURL(new Blob([t],{type:"audio/wav"})),q.Cn[n]=o}}),0)}function K(){const t=document.getElementById("js-hit-ball");t.classList.contains("disabled")||(q.inputMode=R.Dt,t.classList.add("active"),document.getElementById("js-place-wall").classList.remove("active"),document.getElementById("js-hit-ball").style.boxShadow=`0 2px ${nt.Gt}`,document.getElementById("js-place-wall").style.boxShadow=`0 5px ${nt.Gt}`)}function X(){const t=window.innerWidth/z.width,n=window.innerHeight/z.height;return Math.min(t,n)}q.bn=document.getElementById("game-ui"),q.Fn=document.getElementById("hole-number"),q.An=document.getElementById("canvas-container"),q.gn=document.getElementById("js-prev"),q.$n=document.getElementById("js-next"),document.getElementById("js-hit-ball").addEventListener("click",(t=>{t.preventDefault(),K()})),document.getElementById("js-place-wall").addEventListener("click",(t=>{t.preventDefault(),t.currentTarget.classList.contains("disabled")||(q.inputMode=R.Zt,t.currentTarget.classList.add("active"),document.getElementById("js-hit-ball").classList.remove("active"),document.getElementById("js-hit-ball").style.boxShadow=`0 5px ${nt.Gt}`,document.getElementById("js-place-wall").style.boxShadow=`0 2px ${nt.Gt}`)})),document.getElementById("js-reset").addEventListener("click",(t=>{t.preventDefault(),It(),gt()})),q.gn.addEventListener("click",(t=>{t.preventDefault(),t.currentTarget.classList.contains("disabled")||At(-1===_?Z.length:_)})),q.$n.addEventListener("click",(t=>{t.preventDefault(),t.currentTarget.classList.contains("disabled")||At(_+2)}));const Y=new h(0,0,0,0,!0,!0),Z=[new C,new p,new v,new B,new x,new F,new A,new g,new $,new k,new y,new E,new D];let _=0,tt=(_+1)%Z.length,nt=Z[_];nt.reset();let st=Z[tt];const et=[];let it=null,ot=new r;function ht(){if(q.Mn.x=it.M.x,q.Mn.y=it.M.y,q.bn.innerHTML=q.wn,q.inputMode!==R.en)for(let t=0;t<nt.It.length;t++){const n=nt.It[t];if(!n.R)continue;const s=n.ht(it.M.x,it.M.y);if(n.lt(it.M.x,it.M.y))return void nt.It.splice(t,1);if(s)return q.ln=q.inputMode,q.inputMode=R._t,q.rn=n,void(q.cn=s);n.it(it.M.x,it.M.y)&&(q.ln=q.inputMode,q.inputMode=R.tn,q.rn=n,q.cn=null)}q.inputMode===R.Dt?function(){et.length=0;for(let t=0;t<nt.Pt.length;t++){const n=nt.Pt[t];et.push(new a(n.J.x,n.J.y,it.u.x,it.u.y))}}():q.inputMode&R.sn&&ot.X.push({x:it.M.x,y:it.M.y})}function at(){q.inputMode===R.Dt?function(){if(0===et.length)return;Pt("hit");for(let t=0;t<nt.Pt.length;t++){const n=nt.Pt[t];if(n.At)continue;const s=et[t],e=Math.cos(s.angle)*s.ft*.05,i=Math.sin(s.angle)*s.ft*.05;n.U.x=e,n.U.y=i,n.Dt=!0}t=et[0].angle,n=et[0].ft,function(t,n){const s=document.styleSheets[0],e="shake-animation",i="shake",o=.1*n,h=.75;for(let t=0;t<s.cssRules.length;t++)if(s.cssRules[t].name===e){s.deleteRule(t);break}const a=-Math.cos(t)*o,r=Math.sin(t)*o,c=`\n    @keyframes ${e} {\n      0% { transform: translate(${a}px, ${r}px); }\n      60% { transform: translate(${-.3*a}px, ${-.3*r}px); }\n      100% { transform: translate(0, 0); }\n    }\n  `;s.insertRule(c,s.cssRules.length);let l=-1;for(let t=0;t<s.cssRules.length;t++)if(s.cssRules[t].selectorText===`.${i}`){l=t;break}const u=`\n    .${i} {\n      animation: ${e} ${h}s ease-out;\n    }\n  `;l>=0?(s.deleteRule(l),s.insertRule(u,l)):s.insertRule(u,s.cssRules.length)}(t,n),document.getElementById("canvas-container").classList.add("shake"),setTimeout((()=>{document.getElementById("canvas-container").classList.remove("shake")}),1e3),et.length=0,nt.Dt=!0,q.inputMode=R.en,z.style.cursor="not-allowed",document.getElementById("js-hit-ball").classList.add("disabled"),document.getElementById("js-place-wall").classList.add("disabled"),q.$n.classList.add("disabled"),q.gn.classList.add("disabled");var t,n;const s=document.getElementById("js-reset");s.classList.remove("disabled"),Array.from(document.getElementsByClassName("button")).forEach((t=>{"js-reset"!==t.id&&(t.style.backgroundColor=null,t.style.boxShadow=null)})),s.style.backgroundColor=nt.Nt,s.style.boxShadow=`0 5px ${nt.Gt}`,s.style.color=Lt(...jt(nt.Nt)),q.An.style.transform=null,q.fn=q.dn}():q.inputMode&R.sn?function(){if(0===ot.X.length)return;if(Mt(ot.X[0].x,ot.X[0].y,it.M.x,it.M.y)<W&&1===ot.X.length)return;if(ot.X.push({x:it.M.x,y:it.M.y}),ot.X.length<2)return;nt.It.push(new h(ot.X[0].x,ot.X[0].y,ot.X[1].x,ot.X[1].y,!0)),ot=new r}():(q.inputMode===R._t||q.inputMode===R.tn)&&(q.inputMode=q.ln,q.rn=null,q.cn=null),q.bn.innerHTML=q.wn}function rt(){q.inputMode===R.Dt?function(){if(0===et.length)return;let t=1;for(let n=0;n<et.length;n++){const s=et[n],e=nt.Pt[n];if(e.At)continue;t=e.gt;const i=t+lt(it),o=Mt(it.l.x,it.l.y,it.h.x,it.h.y);s.angle=i,s.ft=o}const n=et[0];q.dn=`${(180*n.angle/Math.PI).toFixed(0)}° | ${n.ft.toFixed(0)}`;let s="";q.fn.length>0&&(s=`<div class="prev-ui-text">${q.fn}</div>`);s+=`<div>${q.dn}</div>`,q.bn.innerHTML=s,function(t,n){const s=-Math.cos(n)*t*.1,e=Math.sin(n)*t*.1;q.An.style.transform=`translate(${s}px, ${e}px)`}(n.ft,n.angle)}():q.inputMode===R._t?function(){q.cn&&(q.cn===q.rn.S?q.rn.q(it.M.x,it.M.y,q.rn.T.x,q.rn.T.y):q.rn.q(q.rn.S.x,q.rn.S.y,it.M.x,it.M.y));ct(q.rn)}():q.inputMode===R.tn?function(){if(q.rn){const t=it.M.x-q.Mn.x,n=it.M.y-q.Mn.y;q.rn.q(q.rn.S.x+t,q.rn.S.y+n,q.rn.T.x+t,q.rn.T.y+n),q.Mn.x=it.M.x,q.Mn.y=it.M.y}ct(q.rn)}():q.inputMode===R.Zt&&ot.X.length>0&&ct(ot)}function ct(t){if(1===t.X.length){const n=it.M.x-t.X[0].x,s=it.M.y-t.X[0].y,e=(180*Math.atan2(s,n)/Math.PI+360)%360;q.bn.innerText=`${e.toFixed(0)}°`,-0===e&&(q.bn.innerText="0")}else{const n=t.X[1].x-t.X[0].x,s=t.X[1].y-t.X[0].y,e=(180*Math.atan2(s,n)/Math.PI+360)%360;q.bn.innerText=`${e.toFixed(0)}°`,-0===e&&(q.bn.innerText="0")}}function lt(t){return Math.atan2(-(t.l.y-t.h.y),-(t.l.x-t.h.x))}function ut(t){t.J.x+t.xt<0&&(t.J.x=z.width-t.xt),t.J.x-t.xt>z.width&&(t.J.x=t.xt),t.J.y+t.xt<0&&(t.J.y=z.height-t.xt),t.J.y-t.xt>z.height&&(t.J.y=t.xt)}function dt(t,n){const s=t.J.x-n.J.x,e=t.J.y-n.J.y;return Math.sqrt(s*s+e*e)<t.xt+n.xt}function ft(t,n){const s=t.J.x-n.J.x,e=t.J.y-n.J.y,i=Math.sqrt(s*s+e*e);if(i>t.xt+n.xt)return 0;const o=t.xt+n.xt;return(o-i)/o}function wt(t,n){const s=n.J.x-t.J.x,e=n.J.y-t.J.y,i=Math.sqrt(s*s+e*e);if(0===i)return;const o=t.xt+n.xt-i,h=s/i,a=e/i;o>0&&(t.J.x-=o*h*(n.vt/(t.vt+n.vt)),t.J.y-=o*a*(n.vt/(t.vt+n.vt)),n.J.x+=o*h*(t.vt/(t.vt+n.vt)),n.J.y+=o*a*(t.vt/(t.vt+n.vt)));const r=(n.U.x-t.U.x)*h+(n.U.y-t.U.y)*a;if(r>0)return;const c=-2*r/(1/t.vt+1/n.vt);t.U.x-=c/t.vt*h,t.U.y-=c/t.vt*a,n.U.x+=c/n.vt*h,n.U.y+=c/n.vt*a}function Mt(t,n,s,e){return Math.sqrt(Math.pow(s-t,2)+Math.pow(e-n,2))}function mt(t,n=!0){t.J.x-t.xt<0&&Ct(t,t.J.x+z.width,t.J.y,n),t.J.x+t.xt>z.width&&Ct(t,t.J.x-z.width,t.J.y,n),t.J.y-t.xt<0&&Ct(t,t.J.x,t.J.y+z.height,n),t.J.y+t.xt>z.height&&Ct(t,t.J.x,t.J.y-z.height,n),Ct(t,t.J.x,t.J.y,n)}function Ct(t,n,s,e=!0){O.beginPath(),O.arc(n,s,t.xt,0,2*Math.PI),O.fillStyle=`rgba(255, 255, 255, ${t.alpha})`;const i=`rgba(${t.bt[0]}, ${t.bt[1]}, ${t.bt[2]}, ${t.alpha})`;e||(O.fillStyle=i),O.strokeStyle=`rgba(0, 0, 0, ${t.alpha})`,O.lineWidth=5,O.setLineDash([]),O.closePath(),e&&O.stroke(),O.fill()}function pt(t){O.beginPath(),O.arc(t.J.x,t.J.y,t.xt,0,2*Math.PI),O.fillStyle=t.color,O.fill(),O.closePath()}function vt(){if(O.clearRect(0,0,z.width,z.height),-1!==_){!function(t){q.An.style.backgroundColor=t.backgroundColor,q.Fn.style.color=t.Ht,t.draw(O);for(let n=0;n<t.St.length;n++)pt(t.St[n]);for(let n=0;n<t.It.length;n++)t.It[n].draw(O);q.inputMode&R.sn&&ot.X.length>0&&(Y.q(ot.X[0].x,ot.X[0].y,it.M.x,it.M.y),Y.Zt=q.inputMode===R.Zt,Y.draw(O));for(let n=0;n<t.Pt.length;n++){const s=t.Pt[n];if(s.Dt)for(let t=0;t<s.kt.length;t++)mt(s.kt[t],!1);mt(s)}}(nt);for(let t=0;t<et.length;t++){const n=et[t];nt.Pt[t].At||Bt(n)}for(let t=0;t<nt.Pt.length;t++){const n=nt.Pt[t];n.At&&n.At.Lt(O)}}}function Bt(t){xt(O,t.dt.x,t.dt.y,t.Mt.x,t.Mt.y);const n=Math.abs(t.dt.x-t.Mt.x),s=Math.abs(t.dt.y-t.Mt.y);let e=t.dt.x,i=t.Mt.x,o=t.dt.y,h=t.Mt.y;t.Mt.x<0&&(e=t.dt.x+z.width,i=e-n),t.Mt.x>z.width&&(e=t.dt.x-z.width,i=e+n),t.Mt.y<0&&(o=t.dt.y+z.height,h=o-s),t.Mt.y>z.height&&(o=t.dt.y-z.height,h=o+s),xt(O,e,o,i,h)}function xt(t,n,s,e,i){const o=Mt(n,s,e,i);var h=Math.min(o,20),a=Math.atan2(i-s,e-n);t.fillStyle="#fff",t.strokeStyle="#000",t.lineWidth=5,t.beginPath(),t.moveTo(n,s),t.lineTo(e-h/2*Math.cos(a),i-h/2*Math.sin(a)),t.stroke(),t.strokeStyle="#fff",t.fillStyle="#fff",t.lineWidth=2,t.stroke(),t.beginPath(),t.moveTo(e,i),t.lineTo(e-h*Math.cos(a-Math.PI/6),i-h*Math.sin(a-Math.PI/6)),t.lineTo(e-h*Math.cos(a+Math.PI/6),i-h*Math.sin(a+Math.PI/6)),t.closePath(),t.fill(),t.lineWidth=3,t.strokeStyle="#000",t.stroke(),t.fillStyle="#fff",t.fill(),t.beginPath(),t.moveTo(n,s),t.lineTo(e-h/2*Math.cos(a),i-h/2*Math.sin(a)),t.strokeStyle="#fff",t.lineWidth=2,t.stroke(),t.fillStyle="#fff",t.beginPath(),t.arc(n,s,5,0,2*Math.PI),t.fill(),t.closePath()}function bt(t){nt.update(),nt.Jt&&null===q.Bn&&(q.Bn=Date.now());for(let n=0;n<nt.Pt.length;n++){const s=nt.Pt[n],e=et[n];s.update(t),s.At&&s.At.jt();for(let t=0;t<nt.Pt.length;t++){if(n===t)continue;const e=nt.Pt[t];s.At||e.At||s.alpha<.5||dt(s,e)&&wt(s,e)}e&&(e.dt.x=s.J.x,e.dt.y=s.J.y),q.inputMode===R.en&&(ut(s),$t(s),Ft(s))}const n=null!==q.Bn&&Date.now()-q.Bn>2e3;if(nt.Jt&&!q.mn&&-1!==_&&n&&(Pt("winLevel"),function(){const t=q.An;q.mn=!0,t.classList.add("offscreen-right"),t.style.transition="transform 1s ease-in-out";const n=_;setTimeout((()=>{At(n+2>Z.length?"win":n+2),t.classList.remove("offscreen-right"),t.classList.add("offscreen-left"),t.style.transition="none",setTimeout((()=>{t.style.transition="transform 1s ease-in-out",t.classList.remove("offscreen-left"),t.classList.add("onscreen"),setTimeout((()=>{t.style.transition="none",q.mn=!1,t.classList.remove("onscreen")}),1e3)}),50)}),1e3)}()),nt.Dt)for(let t=0;t<nt.Pt.length;t++){const n=nt.Pt[t];n.At||(null===q.an&&(q.an=Date.now()),Mt(n.U.x,n.U.y,0,0)<V?null===q.an&&(q.an=Date.now()):q.an=null,null!==q.an&&Date.now()-q.an>1e3&&(It(),gt(),Pt("loseLevel")))}for(let t=0;t<nt.It.length;t++){const n=nt.It[t];n.O&&n.update()}}function Ft(t){for(let n=0;n<nt.It.length;n++){const s=nt.It[n];if(s.O)continue;const e=u(t,s);if(e){const n=.5*Math.hypot(t.U.x,t.U.y);s.nt(n),Pt("wall"),St(Math.random()*Math.PI*2),t.J.x+=e.Ct.x,t.J.y+=e.Ct.y;const i=e.axis,o=t.U.x*i.x+t.U.y*i.y;t.U.x-=2*o*i.x,t.U.y-=2*o*i.y}}}function At(t){if("win"===t)return document.getElementById("title").style.display="none",document.getElementById("win").style.display=null,document.getElementById("win").classList.remove("animated"),setTimeout((()=>document.getElementById("win").classList.add("animated")),0),q.wn="",q.Fn.innerText="",Pt("winGame"),location.hash="#/win",_=-1,void gt();1!==t||it?(console.log("fart"),document.getElementById("win").style.display="none"):(document.getElementById("win").style.display="none",document.getElementById("title").classList.remove("animated"),document.getElementById("title").style.display="none",setTimeout((()=>{document.getElementById("title").style.display=null,document.getElementById("title").classList.add("animated")}),0)),_=(t-1)%Z.length;const n=(_+1)%Z.length;nt=Z[_],st=Z[n],nt.reset(),location.hash=`#/${_+1}`,q.fn="",q.Fn.innerText=`${_+1}`,gt(),It()}function gt(){document.getElementById("js-hit-ball").classList.add("active"),document.getElementById("js-place-wall").classList.remove("active"),document.getElementById("js-reset").classList.remove("active"),document.getElementById("js-hit-ball").classList.remove("disabled"),document.getElementById("js-place-wall").classList.remove("disabled");document.getElementById("js-reset").classList.add("disabled"),q.gn.classList.remove("disabled"),q.$n.classList.remove("disabled"),0===_&&q.gn.classList.add("disabled"),_!==Z.length-1&&-1!==_||q.$n.classList.add("disabled"),Array.from(document.getElementsByClassName("button")).forEach((t=>{let n=nt.Nt,s=`0 5px ${nt.Gt}`,e=Lt(...jt(nt.Nt));t.classList.contains("disabled")?(t.style.backgroundColor=null,t.style.boxShadow=null,t.style.color=null):(t.style.backgroundColor=n,t.style.boxShadow=s,t.style.color=e)})),q.an=null,q.Bn=null,q.rn=null,q.cn=null,q.inputMode=R.Dt,z.style.cursor="crosshair"}function $t(t){t.kn=!1;for(let n=0;n<nt.St.length;n++){const s=nt.St[n],e=s.J.x-t.J.x,i=s.J.y-t.J.y,o=Math.sqrt(e*e+i*i),h=Math.sqrt(t.U.x*t.U.x+t.U.y*t.U.y);if(o<=s.xt-t.xt&&h<U&&!t.At)t.At=s,Pt("inHole"),t.kn=!0;else if(dt(t,s)){const n=.2*ft(t,s),h=n*e/o,a=n*i/o;t.U.x+=h,t.U.y+=a,t.alpha-=.01,t.alpha=Math.max(t.alpha,0),t.kn=!0}}t.kn||(t.alpha=1)}window.playSong=Pt;const kt=1e3/60;let yt=0,Et=0;function Dt(){const t=window.location.hash.substring(2);return"win"===t?"win":0===t.length?1:parseInt(t,10)}function jt(t){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function Lt(t,n,s){const e=function(t,n,s){return.299*t+.587*n+.114*s}(t,n,s);return e>128?"black":"white"}function Pt(t){q.Cn[t]&&(q.Cn[t].currentTime=0,q.Cn[t].play())}function It(){q.dn="",q.wn=`${_+1} / ${Z.length}`,q.bn.innerHTML=q.wn,q.bn.style.color=Lt(...jt(nt.Nt)),q.bn.style.backgroundColor=nt.Nt,nt.reset()}function St(t){!function(t){const n=document.styleSheets[0],s="shake-animation",e="shake";for(let t=0;t<n.cssRules.length;t++)if(n.cssRules[t].name===s){n.deleteRule(t);break}const i=1*Math.cos(t),o=1*-Math.sin(t);let h=`\n    @keyframes ${s} {\n      0% { transform: translate(0, 0); }\n      10% { transform: translate(${-10*i}px, ${10*o}px); }\n      20% { transform: translate(${10*i}px, ${-10*o}px); }\n      30% { transform: translate(${-8*i}px, ${8*o}px); }\n      40% { transform: translate(${8*i}px, ${-8*o}px); }\n      50% { transform: translate(${-5*i}px, ${5*o}px); }\n      60% { transform: translate(${5*i}px, ${-5*o}px); }\n      70% { transform: translate(${-3*i}px, ${3*o}px); }\n      80% { transform: translate(${3*i}px, ${-3*o}px); }\n      90% { transform: translate(${-1*i}px, ${o}px); }\n      100% { transform: translate(0, 0); }\n    }\n  `;n.insertRule(h,n.cssRules.length);let a=-1;for(let t=0;t<n.cssRules.length;t++)if(n.cssRules[t].selectorText===`.${e}`){a=t;break}const r=`\n    .${e} {\n      animation: ${s} 1s ease-out;\n    }\n  `;a>=0?(n.deleteRule(a),n.insertRule(r,a)):n.insertRule(r,n.cssRules.length)}(t),document.getElementById("canvas-container").classList.add("shake"),setTimeout((()=>{document.getElementById("canvas-container").classList.remove("shake")}),1e3)}!function t(n){const s=n-Et;for(Et=n,yt+=s;yt>=kt;)bt(kt),yt-=kt;vt(),requestAnimationFrame(t)}(0),document.addEventListener("DOMContentLoaded",(()=>{At(Dt()),K(),Q(N,"hit"),Q(J,"winLevel"),Q(G,"wall"),Q(H,"loseLevel"),Q(T,"winGame"),Q(S,"inHole")})),window.addEventListener("hashchange",(()=>{"win"!==Dt()&&At(Dt())})),document.body.addEventListener("click",(()=>{document.getElementById("title").classList.add("hide"),document.getElementById("title").style.opacity=0,it||(Pt("winGame"),it=new n(z,ht,at,rt))})),document.body.addEventListener("touchstart",(()=>{document.getElementById("title").classList.add("hide")})),window.addEventListener("mousemove",(t=>{const n=z.getBoundingClientRect();let s="crosshair";for(let e=0;e<nt.It.length;e++){let i=t.clientX-n.left,o=t.clientY-n.top;const h=nt.It[e];i/=X(),o/=X(),h.lt(i,o)?s="pointer":(h.ht(i,o)||h.it(i,o))&&(s="grab")}q.inputMode===R.en&&(s="not-allowed"),z.style.cursor=s}))})();